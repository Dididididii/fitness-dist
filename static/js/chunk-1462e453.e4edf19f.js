(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1462e453"],{"0739":function(e,t,n){"use strict";n("9df5")},"3c8c":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-container"},[n("div",{directives:[{name:"permission",rawName:"v-permission",value:"show:event:search",expression:"'show:event:search'"}],staticClass:"search-container"},[n("span",{staticClass:"search-label"},[e._v("活动标题：")]),n("el-input",{staticClass:"search-main",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.params.title,callback:function(t){e.$set(e.params,"title",t)},expression:"params.title"}}),n("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e.searchShow}},[e._v("查询")])],1),n("div",{staticClass:"create-container"},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"show:event:add",expression:"'show:event:add'"}],attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/show/add")}}},[e._v("添加活动")]),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"show:event:del",expression:"'show:event:del'"}],on:{click:e.selectDel}},[e._v("批量删除")])],1),n("div",{staticClass:"table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.showList},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{label:"活动标题",prop:"title"}}),n("el-table-column",{attrs:{label:"发布时间",prop:"time"}}),n("el-table-column",{attrs:{label:"发布人",prop:"name"}}),n("el-table-column",{attrs:{label:"内容",prop:"content"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[n("span",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[e._v(e._s(s.content))])]}}])}),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.isshow?n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"show:event:show",expression:"'show:event:show'"}],attrs:{size:"mini",type:"text"},on:{click:function(n){return e.updateIsShow(t.row.id,1)}}},[e._v("展示")]):n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"show:event:show",expression:"'show:event:show'"}],attrs:{size:"mini",type:"text"},on:{click:function(n){return e.updateIsShow(t.row.id,0)}}},[e._v("取消展示")]),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"show:event:see",expression:"'show:event:see'"}],attrs:{size:"mini",type:"text"},on:{click:function(n){return e.$router.push({path:"/show/add",query:{id:t.row.id,type:"see"}})}}},[e._v("查看")]),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"show:event:edit",expression:"'show:event:edit'"}],attrs:{size:"mini",type:"text"},on:{click:function(n){return e.$router.push({path:"/show/add",query:{id:t.row.id,type:"edit"}})}}},[e._v("编辑")]),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"show:event:del",expression:"'show:event:del'"}],attrs:{size:"mini",type:"text"},on:{click:function(n){return e.delShow(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),n("div",{staticClass:"page-container"},[n("el-pagination",{attrs:{layout:"total, prev, pager, next",total:e.total}})],1)])},a=[],i=n("c7eb"),r=n("1da1"),o=(n("d81d"),n("821b")),c={data:function(){return{loading:!0,showList:[],params:{page:1,limit:10,title:null},total:0,selectList:[]}},created:function(){this.getShowList()},methods:{delShow:function(e){var t=this;this.$confirm("确定要删除此活动吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(o["b"])(e);case 2:t.$message({type:"success",message:"删除成功!"}),t.getShowList();case 4:case"end":return n.stop()}}),n)}))))},selectDel:function(){var e=this;return Object(r["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectList.length>0?e.$confirm("确定要删除此活动吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["b"])(e.selectList);case 2:e.$message({type:"success",message:"删除成功!"}),e.getShowList();case 4:case"end":return t.stop()}}),t)})))):e.$message({type:"warning",message:"请先选择要删除的活动!"});case 1:case"end":return t.stop()}}),t)})))()},handleSelectionChange:function(e){this.selectList=e.map((function(e){return e.id})),console.log(this.selectList)},updateIsShow:function(e,t){var n=this;this.$confirm("确定要取消展示/展示此活动吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(Object(i["a"])().mark((function s(){return Object(i["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(o["f"])(t);case 2:return s.next=4,Object(o["g"])({id:e,isshow:t});case 4:n.$message({type:"success",message:"操作成功!"}),n.getShowList();case 6:case"end":return s.stop()}}),s)}))))},searchShow:function(){this.params.page=1,this.getShowList()},getShowList:function(){var e=this;return Object(r["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(o["e"])(e.params);case 3:n=t.sent,e.showList=n.data.rows,e.total=n.data.total,e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()}}},u=c,l=(n("0739"),n("2877")),p=Object(l["a"])(u,s,a,!1,null,"5cf416ca",null);t["default"]=p.exports},"821b":function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return l}));var s=n("b775"),a=function(e){return Object(s["a"])({url:"/show",params:e})},i=function(e){return Object(s["a"])({url:"/show",params:{id:e}})},r=function(e){return Object(s["a"])({url:"/show",method:"post",data:e})},o=function(e){return Object(s["a"])({url:"/show",method:"delete",data:{id:e}})},c=function(e){return Object(s["a"])({url:"/show",method:"put",data:e})},u=function(e){return Object(s["a"])({url:"/show/isshow",params:{isshow:e}})},l=function(e){return Object(s["a"])({url:"/show/isshow",method:"put",data:e})}},"9df5":function(e,t,n){}}]);