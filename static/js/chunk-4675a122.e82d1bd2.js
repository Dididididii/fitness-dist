(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4675a122"],{3224:function(e,t,a){},"6f56":function(e,t,a){"use strict";a.d(t,"l",(function(){return n})),a.d(t,"j",(function(){return i})),a.d(t,"g",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return o})),a.d(t,"h",(function(){return l})),a.d(t,"c",(function(){return u})),a.d(t,"m",(function(){return d})),a.d(t,"f",(function(){return m})),a.d(t,"i",(function(){return p})),a.d(t,"b",(function(){return v})),a.d(t,"e",(function(){return f})),a.d(t,"n",(function(){return b})),a.d(t,"k",(function(){return g}));var r=a("b775"),n=function(e){return Object(r["a"])({url:"/clocking/signin",method:"post",data:e})},i=function(e){return Object(r["a"])({url:"/clocking/signin",params:e})},s=function(e){return Object(r["a"])({url:"/clocking/clockin",params:e})},c=function(e){return Object(r["a"])({url:"/clocking/clockin",method:"post",data:{clockingTime:e}})},o=function(e){return Object(r["a"])({url:"/clocking/clockout",method:"put",data:{checkOutTime:e}})},l=function(e){return Object(r["a"])({url:"/clocking/leave",params:e})},u=function(e){return Object(r["a"])({url:"/clocking/askleave",method:"post",data:e})},d=function(e){return Object(r["a"])({url:"/clocking/askleave",method:"put",data:e})},m=function(e){return Object(r["a"])({url:"/clocking/askleave?clockId=".concat(e),method:"delete"})},p=function(e){return Object(r["a"])({url:"/clocking/over",params:e})},v=function(e){return Object(r["a"])({url:"/clocking/over",method:"post",data:e})},f=function(e){return Object(r["a"])({url:"/clocking/over",method:"delete",data:{id:e}})},b=function(e){return Object(r["a"])({url:"/clocking/over",method:"put",data:e})},g=function(){return Object(r["a"])({url:"/clocking/clockin/today"})}},ea70:function(e,t,a){"use strict";a("3224")},f667:function(e,t,a){"use strict";a.r(t);var r,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-container"},[a("div",{directives:[{name:"permission",rawName:"v-permission",value:"clock:leave:search",expression:"'clock:leave:search'"}],staticClass:"search-container"},[a("span",{staticClass:"search-label"},[e._v("员工姓名 ：")]),a("el-input",{staticClass:"search-main",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}}),a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e.searLeave}},[e._v("查询")])],1),a("div",{staticClass:"create-container"},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"clock:leave:add",expression:"'clock:leave:add'"}],attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("请假申请")])],1),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.leaveList}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),a("el-table-column",{attrs:{label:"员工姓名",prop:"name"}}),a("el-table-column",{attrs:{label:"请假开始",prop:"startLeave"}}),a("el-table-column",{attrs:{label:"请假结束",prop:"endLeave"}}),a("el-table-column",{attrs:{label:"请假原因",prop:"reason"}}),a("el-table-column",{attrs:{label:"请假时长(小时)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.showLeaveTime(t.row.startLeave,t.row.endLeave)))]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"clock:leave:edit",expression:"'clock:leave:edit'"}],attrs:{size:"mini",type:"text"},on:{click:function(t){return e.editLeave(r)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"clock:leave:del",expression:"'clock:leave:del'"}],attrs:{size:"mini",type:"text"},on:{click:function(t){return e.delLeave(r.clockId)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticClass:"page-container"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.currentChange}})],1),a("el-dialog",{attrs:{title:e.addForm.id?"编辑请假":"申请请假",width:"580px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{attrs:{size:"mini"},on:{click:e.resetForm}},[e._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])]},proxy:!0}])},[a("div",{staticClass:"form-container"},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"请假开始时间",prop:"startLeave"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.addForm.startLeave,callback:function(t){e.$set(e.addForm,"startLeave",t)},expression:"addForm.startLeave"}})],1),a("el-form-item",{attrs:{label:"请假结束时间",prop:"endLeave"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.addForm.endLeave,callback:function(t){e.$set(e.addForm,"endLeave",t)},expression:"addForm.endLeave"}})],1),a("el-form-item",{attrs:{label:"请假原因",prop:"reason"}},[a("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.addForm.reason,callback:function(t){e.$set(e.addForm,"reason",t)},expression:"addForm.reason"}})],1)],1)],1)])],1)},i=[],s=a("ade3"),c=a("5530"),o=a("c7eb"),l=a("1da1"),u=a("6f56"),d={data:function(){return{loading:!0,dialogVisible:!1,leaveList:[],params:{page:1,limit:2,name:""},total:0,superShow:!1,addForm:{startLeave:"",endLeave:"",reason:""},addFormRules:{startLeave:[{type:"string",required:!0,message:"请假开始时间不能为空",trigger:"change"}],endLeave:[{type:"string",required:!0,message:"请假结束时间不能为空",trigger:"change"}],reason:[{required:!0,message:"请假原因不能为空",trigger:"blur"}]}}},created:function(){this.getLeaveList()},methods:(r={daysRemaining:function(e,t){var a=t,r=e,n=a-r;return n>0?Math.floor(n/36e5):0},showLeaveTime:function(e,t){var a=new Date(e).getTime(),r=new Date(t).getTime(),n=this.daysRemaining(a,r),i="".concat(n>10?n:"0"+n);return i},getLeaveList:function(){var e=this;return Object(l["a"])(Object(o["a"])().mark((function t(){var a,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(u["h"])(e.params);case 3:a=t.sent,r=a.data,e.leaveList=r.data,e.total=r.total,e.superShow=r.super,e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},currentChange:function(e){this.params.page=e,this.getLeaveList()},delLeave:function(e){var t=this;this.$confirm("确认删除该请假申请吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["f"])(e);case 2:t.$message({type:"success",message:"请假申请删除成功"}),t.getLeaveList();case 4:case"end":return a.stop()}}),a)}))))},editLeave:function(e){this.dialogVisible=!0,this.addForm=Object(c["a"])({},e)},searLeave:function(){this.params.page=1,this.getLeaveList()},submitForm:function(){var e=this;this.$refs.addForm.validate(function(){var t=Object(l["a"])(Object(o["a"])().mark((function t(a){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:if(!e.addForm.clockId){t.next=9;break}return delete e.addForm.id,t.next=6,Object(u["m"])(e.addForm);case 6:e.$message({type:"success",message:"请假编辑成功"}),t.next=12;break;case 9:return t.next=11,Object(u["c"])(e.addForm);case 11:e.$message({type:"success",message:"请假申请提交成功"});case 12:e.resetForm(),e.getLeaveList();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs.addForm.resetFields(),this.addForm={startLeave:"",endLeave:"",reason:""},this.dialogVisible=!1}},Object(s["a"])(r,"getLeaveList",(function(){var e=this;return Object(l["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(u["h"])(e.params);case 3:a=t.sent,e.leaveList=a.data.rows,e.total=a.data.total,e.superShow=a.data.super,e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()})),Object(s["a"])(r,"currentChange",(function(e){this.params.page=e,this.getLeaveList()})),r)},m=d,p=(a("ea70"),a("2877")),v=Object(p["a"])(m,n,i,!1,null,"560bfff6",null);t["default"]=v.exports}}]);