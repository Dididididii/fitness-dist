(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4785a445"],{"0a84":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-container"},[a("div",{directives:[{name:"permission",rawName:"v-permission",value:"employee:manage:search",expression:"'employee:manage:search'"}],staticClass:"search-container"},[a("span",{staticClass:"search-label"},[e._v("员工姓名：")]),a("el-input",{staticClass:"search-main",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}}),a("span",{staticClass:"search-label"},[e._v("手机号码：")]),a("el-input",{staticClass:"search-main",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.params.photo,callback:function(t){e.$set(e.params,"photo",t)},expression:"params.photo"}}),a("span",{staticClass:"search-label"},[e._v("状态：")]),a("el-select",{model:{value:e.params.employeeClass,callback:function(t){e.$set(e.params,"employeeClass",t)},expression:"params.employeeClass"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e.searchManage}},[e._v("查询")])],1),a("div",{staticClass:"create-container"},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"employee:manage:add",expression:"'employee:manage:add'"}],attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加员工")])],1),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.employeeList}},[a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod}}),a("el-table-column",{attrs:{label:"员工名称",prop:"name"}}),a("el-table-column",{attrs:{label:"联系方式",prop:"photo"}}),a("el-table-column",{attrs:{label:"身份证号码",prop:"identificationCard"}}),a("el-table-column",{attrs:{label:"登录账号",prop:"login"}}),a("el-table-column",{attrs:{label:"工种",prop:"employeeClass"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.classList[t.row.employeeClass]))]}}])}),a("el-table-column",{attrs:{label:"员工业绩",prop:"performance"}}),a("el-table-column",{attrs:{label:"入职时间",prop:"entryTime"}}),a("el-table-column",{attrs:{label:"离职时间",prop:"endTime"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"employee:manage:limit",expression:"'employee:manage:limit'"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return e.$router.push({path:"/limit",query:{id:t.row.id,type:"manage"}})}}},[e._v("赋予权限")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"employee:manage:edit",expression:"'employee:manage:edit'"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return e.editEmployee(t.row)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"employee:manage:del",expression:"'employee:manage:del'"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return e.delEmployee(t.row.id)}}},[e._v("删除")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"employee:manage:change",expression:"'employee:manage:change'"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return e.resetPassword(t.row.id)}}},[e._v("重置密码")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"employee:manage:change",expression:"'employee:manage:change'"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return e.openChangePass(t.row.id)}}},[e._v("修改密码")])]}}])})],1)],1),a("div",{staticClass:"page-container"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next",total:e.total,"page-size":e.params.pageSize},on:{"current-change":e.currentChange}})],1),a("el-dialog",{attrs:{title:e.addForm.id?"编辑员工":"添加员工",width:"580px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{attrs:{size:"mini"},on:{click:e.resetForm}},[e._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])]},proxy:!0}])},[a("div",{staticClass:"form-container"},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"员工名称",prop:"name"}},[a("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"联系方式",prop:"photo"}},[a("el-input",{model:{value:e.addForm.photo,callback:function(t){e.$set(e.addForm,"photo",t)},expression:"addForm.photo"}})],1),a("el-form-item",{attrs:{label:"身份证号码",prop:"identificationCard"}},[a("el-input",{model:{value:e.addForm.identificationCard,callback:function(t){e.$set(e.addForm,"identificationCard",t)},expression:"addForm.identificationCard"}})],1),a("el-form-item",{attrs:{label:"登录账号",prop:"login"}},[a("el-input",{model:{value:e.addForm.login,callback:function(t){e.$set(e.addForm,"login",t)},expression:"addForm.login"}})],1),a("span",{staticStyle:{color:"red"}},[e._v("* 登录密码默认为123456")]),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"员工分类",prop:"employeeClass"}},[a("el-select",{model:{value:e.addForm.employeeClass,callback:function(t){e.$set(e.addForm,"employeeClass",t)},expression:"addForm.employeeClass"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"入职时间",prop:"entryTime"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.addForm.entryTime,callback:function(t){e.$set(e.addForm,"entryTime",t)},expression:"addForm.entryTime"}})],1),a("el-form-item",{attrs:{label:"离职时间",prop:"endTime"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.addForm.endTime,callback:function(t){e.$set(e.addForm,"endTime",t)},expression:"addForm.endTime"}})],1),a("el-form-item",{attrs:{label:"绩效",prop:"performance"}},[a("el-input",{model:{value:e.addForm.performance,callback:function(t){e.$set(e.addForm,"performance",t)},expression:"addForm.performance"}})],1)],1)],1)]),a("el-dialog",{attrs:{title:"修改密码",visible:e.outerVisible,width:"30%",center:""},on:{"update:visible":function(t){e.outerVisible=t}}},[a("el-form",{ref:"changeForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off","show-password":""},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[a("el-input",{attrs:{type:"password",autocomplete:"off","show-password":""},model:{value:e.ruleForm.checkPassword,callback:function(t){e.$set(e.ruleForm,"checkPassword",t)},expression:"ruleForm.checkPassword"}})],1),a("el-form-item",[a("span",[a("el-button",{on:{click:e.resetChangeForm}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitChange}},[e._v("确 定")])],1)])],1)],1)],1)},s=[],i=a("c7eb"),o=a("1da1"),n=(a("d9e2"),a("c24f")),l=a("ef75"),c={data:function(){return{loading:!0,ruleForm:{id:"",password:"",checkPassword:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"},{validator:this.validatePass,trigger:"blur"}],checkPassword:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"},{validator:this.validatePass2,trigger:"blur"}]},outerVisible:!1,addForm:{name:"",photo:"",identificationCard:"",employeeClass:"",entryTime:"",endTime:"",performance:"0",login:""},addFormRules:{name:[{required:!0,message:"请输入员工名称",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],photo:[{required:!0,message:"请输入联系方式",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"手机号码格式不对"}],employeeClass:[{required:!0,message:"请选择员工分类",trigger:"change"}],entryTime:[{type:"string",required:!0,message:"请选择入职日期",trigger:"change"}],identificationCard:[{required:!0,message:"请输入身份证号",trigger:"blur"}],login:[{required:!0,message:"请输入登录账号",trigger:"blur"}]},dialogVisible:!1,options:[{value:null,label:"全部"},{value:"temporarily",label:"临时员工"},{value:"formal",label:"正式员工"},{value:"dimission",label:"离职员工"},{value:"coach",label:"教练"}],employeeList:[],total:0,params:{page:1,pageSize:2,name:null,photo:null,employeeClass:null},classList:{temporarily:"临时",formal:"正式",dimission:"离职",coach:"教练"}}},created:function(){this.getEmployeeList(),"add"===this.$route.query.type&&(this.dialogVisible=!0)},methods:{submitChange:function(){var e=this;this.$refs.changeForm.validate(function(){var t=Object(o["a"])(Object(i["a"])().mark((function t(a){var r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return r=e.ruleForm,delete r.checkPassword,t.next=6,Object(n["a"])(r);case 6:e.$message.success("修改成功."),e.resetChangeForm();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetChangeForm:function(){this.$refs.changeForm.resetFields(),this.outerVisible=!1},openChangePass:function(e){this.outerVisible=!0,this.ruleForm.id=e},validatePass:function(e,t,a){""===t?a(new Error("请输入密码")):(""!==this.ruleForm.checkPassword&&this.$refs.changeForm.validateField("checkPassword"),a())},validatePass2:function(e,t,a){""===t?a(new Error("请再次输入密码")):t!==this.ruleForm.password?a(new Error("两次输入密码不一致!")):a()},resetPassword:function(e){var t=this;this.$confirm("此操作将重置该员工登录密码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(n["d"])(e);case 2:t.$message({type:"success",message:"密码重置成功!"});case 3:case"end":return a.stop()}}),a)}))))},delEmployee:function(e){var t=this;this.$confirm("此操作将删除该员工, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["b"])(e);case 2:t.getEmployeeList(),t.$message({type:"success",message:"删除成功!"});case 4:case"end":return a.stop()}}),a)}))))},editEmployee:function(e){this.addForm=e,this.dialogVisible=!0},resetForm:function(){this.$refs.addForm.resetFields(),this.addForm={name:"",photo:"",identificationCard:"",employeeClass:"",entryTime:"",endTime:"",performance:"0"},this.dialogVisible=!1,this.getEmployeeList()},submitForm:function(){var e=this;this.$refs.addForm.validate(function(){var t=Object(o["a"])(Object(i["a"])().mark((function t(a){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:if(!e.addForm.id){t.next=8;break}return t.next=5,Object(l["e"])(e.addForm);case 5:e.$message.success("编辑成功"),t.next=11;break;case 8:return t.next=10,Object(l["a"])(e.addForm);case 10:e.$message.success("添加成功");case 11:e.resetForm();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},searchManage:function(){this.params.page=1,this.getEmployeeList()},indexMethod:function(e){return e+1+(this.params.page-1)*this.params.pageSize},currentChange:function(e){this.params.page=e,this.getEmployeeList()},getEmployeeList:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(l["c"])(e.params);case 3:a=t.sent,e.employeeList=a.data.rows,e.total=a.data.total,e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()}}},m=c,d=(a("226e"),a("2877")),u=Object(d["a"])(m,r,s,!1,null,"321d65bf",null);t["default"]=u.exports},"226e":function(e,t,a){"use strict";a("d0bf")},d0bf:function(e,t,a){},ef75:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return l}));var r=a("b775"),s=function(e){return Object(r["a"])({url:"/employee",params:e})},i=function(e){return Object(r["a"])({url:"/employee/add",method:"post",data:e})},o=function(e){return Object(r["a"])({url:"/employee/edit",method:"put",data:e})},n=function(e){return Object(r["a"])({url:"/employee/del?id=".concat(e),method:"delete"})},l=function(e){return Object(r["a"])({url:"/employee",params:{id:e}})}}}]);