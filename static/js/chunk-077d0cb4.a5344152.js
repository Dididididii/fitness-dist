(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-077d0cb4"],{"29c9":function(e,t,r){"use strict";r("81948")},7500:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return n})),r.d(t,"e",(function(){return i})),r.d(t,"d",(function(){return d})),r.d(t,"g",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"f",(function(){return l}));var a=r("b775"),o=function(e){return Object(a["a"])({url:"/employee/coach",params:e})},n=function(e){return Object(a["a"])({url:"/employee/coach",method:"post",data:e})},i=function(e){return Object(a["a"])({url:"/employee/coach",method:"delete",data:{id:e}})},d=function(e){return Object(a["a"])({url:"/employee/coach",params:{id:e}})},s=function(e){return Object(a["a"])({url:"/employee/coach",method:"put",data:e})},c=function(){return Object(a["a"])({url:"/coach/all"})},l=function(e){return Object(a["a"])({url:"/coach/all",method:"put",data:e})}},81948:function(e,t,r){},"8d51":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i}));var a=r("69ed"),o=r.n(a),n=(r("5f72"),{COS_SecretId:"AKIDToXFlHl8NSOBGE1gBYlqqr084ulU1KQI",COS_SecretKey:"qTvAD3iAcqqeFcmiQyLUSEmX7XnFYdVN",COS_Region:"ap-guangzhou",COS_Bucket:"fitness-1309672163"}),i=new o.a({SecretId:n.COS_SecretId,SecretKey:n.COS_SecretKey})},aa53:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"add-card"},[r("header",{staticClass:"add-header"},[r("el-page-header",{attrs:{content:e.showTitle},on:{back:function(t){return e.$router.back()}}})],1),r("main",{staticClass:"add-main"},[r("div",{staticClass:"form-container"},[r("div",{staticClass:"title"},[e._v("教练信息")]),r("div",{staticClass:"form"},[r("el-form",{ref:"addForm",attrs:{"label-width":"100px",model:e.addForm,rules:e.addFormRules}},[r("el-form-item",{attrs:{label:"教练姓名",prop:"name"}},["see"!==e.$route.query.type?r("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}}):r("span",[e._v(e._s(e.addForm.name))])],1),r("el-form-item",{attrs:{label:"联系方式",prop:"photo"}},["see"!==e.$route.query.type?r("el-input",{model:{value:e.addForm.photo,callback:function(t){e.$set(e.addForm,"photo",t)},expression:"addForm.photo"}}):r("span",[e._v(e._s(e.addForm.photo))])],1),r("el-form-item",{attrs:{label:"身份证号码",prop:"Identity"}},["see"!==e.$route.query.type?r("el-input",{model:{value:e.addForm.Identity,callback:function(t){e.$set(e.addForm,"Identity",t)},expression:"addForm.Identity"}}):r("span",[e._v(e._s(e.addForm.Identity))])],1),r("el-form-item",{attrs:{label:"登录账号",prop:"login"}},["see"!==e.$route.query.type?r("el-input",{model:{value:e.addForm.login,callback:function(t){e.$set(e.addForm,"login",t)},expression:"addForm.login"}}):r("span",[e._v(" "+e._s(e.addForm.login)+" "),r("br")]),r("span",{staticStyle:{color:"blue","font-size":"12px"}},[e._v("*密码默认为123456")])],1),r("el-form-item",{attrs:{label:"入职时间",prop:"entryTime"}},["see"!==e.$route.query.type?r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",format:"yyyy 年 MM 月 dd 日"},model:{value:e.addForm.entryTime,callback:function(t){e.$set(e.addForm,"entryTime",t)},expression:"addForm.entryTime"}}):r("span",[e._v(e._s(e.addForm.entryTime))])],1),r("el-form-item",{attrs:{label:"离职时间",prop:"endTime"}},["see"!==e.$route.query.type?r("el-date-picker",{attrs:{disabled:!e.$route.query.id,type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",format:"yyyy 年 MM 月 dd 日"},model:{value:e.addForm.endTime,callback:function(t){e.$set(e.addForm,"endTime",t)},expression:"addForm.endTime"}}):r("span",[e._v(e._s(e.addForm.endTime))])],1),r("el-form-item",{attrs:{label:"个人简介",prop:"intro"}},["see"!==e.$route.query.type?r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.addForm.intro,callback:function(t){e.$set(e.addForm,"intro",t)},expression:"addForm.intro"}}):r("span",[e._v(e._s(e.addForm.intro))])],1),r("el-form-item",{attrs:{label:"教练照片",prop:"imageUrl"}},["see"!==e.$route.query.type?r("el-upload",{attrs:{action:"#","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"http-request":e.beforeUpload,"on-exceed":e.handleExceed,limit:1}},[r("i",{staticClass:"el-icon-plus"})]):e._e(),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),"see"===e.$route.query.type?r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.addForm.imageUrl,fit:"cover"}}):e._e()],1)],1)],1)])]),"see"!==e.$route.query.type?r("footer",{staticClass:"add-footer"},[r("div",{staticClass:"btn-container"},[r("el-button",{on:{click:e.resetForm}},[e._v("重置")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确定")])],1)]):e._e()])},o=[],n=r("c7eb"),i=r("1da1"),d=(r("b0c0"),r("99af"),r("7500")),s=r("8d51"),c={data:function(){return{dialogImageUrl:"",dialogVisible:!1,addForm:{name:"",imageUrl:"",Identity:"",login:"",entryTime:"",endTime:"",intro:"",photo:""},addFormRules:{name:[{required:!0,message:"请输入教练姓名",trigger:"blur"}],photo:[{required:!0,message:"请输入联系方式",trigger:"blur"}],imageUrl:[{required:!0,message:"请上传教练照片",trigger:"blur"}],Identity:[{required:!0,message:"请输入身份证号码",trigger:"blur"}],login:[{required:!0,message:"请输入登录账号",trigger:"blur"}],entryTime:[{required:!0,type:"string",message:"请选择入职时间",trigger:"change"}],intro:[{required:!0,message:"请输入个人简介",trigger:"blur"}]}}},computed:{showTitle:function(){var e={see:"查看教练信息",edit:"编辑教练"};return e[this.$route.query.type]||"添加教练"}},created:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$route.query.id&&e.onloadCoach();case 1:case"end":return t.stop()}}),t)})))()},methods:{onloadCoach:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){var r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["d"])(e.$route.query.id);case 2:r=t.sent,e.addForm=r.data,e.dialogImageUrl=e.addForm.imageUrl;case 5:case"end":return t.stop()}}),t)})))()},submitForm:function(){var e=this;this.$refs.addForm.validate(function(){var t=Object(i["a"])(Object(n["a"])().mark((function t(r){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",!1);case 2:if(!e.$route.query.id){t.next=8;break}return t.next=5,Object(d["g"])(e.addForm);case 5:e.$message.success("修改成功."),t.next=11;break;case 8:return t.next=10,Object(d["a"])(e.addForm);case 10:e.$message.success("添加成功.");case 11:e.$router.back();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs.addForm.resetFields()},deleteFile:function(e){var t=this;s["a"].deleteObject({Bucket:s["b"].COS_Bucket,Region:s["b"].COS_Region,Key:e},(function(e,r){e?t.$message.error("删除失败."):(t.$message.success("删除成功."),t.fileList=[])}))},uploadFile:function(e){var t=this;return Object(i["a"])(Object(n["a"])().mark((function r(){return Object(n["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:s["a"].uploadFile({Bucket:s["b"].COS_Bucket,Region:s["b"].COS_Region,Key:e.name,Body:e,SliceSize:5242880,onProgress:function(e){}},(function(e,r){e?(console.log("上传失败",e),t.$message.error("上传失败")):(t.$message.success("上传成功"),t.dialogImageUrl="https://".concat(r.Location),t.addForm.imageUrl="https://".concat(r.Location),t.$refs.addForm.validateField("imageUrl"))}));case 1:case"end":return r.stop()}}),r)})))()},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeUpload:function(e){var t=e.file;this.uploadFile(t)},handleRemove:function(e,t){this.addForm.imageUrl="",this.$refs.addForm.validateField("imageUrl")},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}}},l=c,u=(r("29c9"),r("2877")),m=Object(u["a"])(l,a,o,!1,null,"e4b3650a",null);t["default"]=m.exports}}]);